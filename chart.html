<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tank Temperature Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- SIDEBAR -->
    <section id="sidebar">
        <a href="#" class="brand">
            <i class='bx bxs-thermometer'></i>
            <span class="text">Tank Monitor</span>
        </a>
        <ul class="side-menu top">
            <li>
                <a href="index.html">
                    <i class='bx bxs-dashboard'></i>
                    <span class="text">Dashboard</span>
                </a>
            </li>
            <li class="active">
                <a href="chart.html">
                    <i class='bx bxs-line-chart'></i>
                    <span class="text">Charts</span>
                </a>
            </li>
        </ul>
    </section>

    <!-- CONTENT -->
    <section id="content">
        <nav>
            <i class='bx bx-menu'></i>
            <span>Temperature Analysis Charts</span>
        </nav>

        <main>
            <div class="head-title">
                <div class="left">
                    <h1>Tank Temperature Analysis</h1>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h2><i class='bx bx-line-chart'></i> Real-time Temperature Chart</h2>
                    <div class="chart-controls">
                        <div class="control-group">
                            <label for="tank"><i class='bx bx-thermometer'></i> Select Tank:</label>
                            <select id="tank">
                                <option value="">Loading...</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="time-range"><i class='bx bx-time'></i> Time Range:</label>
                            <select id="time-range">
                                <option value="10">Last 10 readings</option>
                                <option value="50" selected>Last 50 readings</option>
                                <option value="100">Last 100 readings</option>
                                <option value="200">Last 200 readings</option>
                            </select>
                        </div>
                        <button id="load-chart" class="btn-load">
                            <i class='bx bx-refresh'></i> Load Chart
                        </button>
                    </div>
                </div>
                
                <!-- Loading State -->
                <div id="loading-state" class="loading-state">
                    <div class="spinner">
                        <i class='bx bx-loader-circle bx-spin'></i>
                    </div>
                    <p>Loading temperature data...</p>
                </div>
                
                <!-- Error State -->
                <div id="error-state" class="error-state" style="display: none;">
                    <div class="error-icon">
                        <i class='bx bx-error-circle'></i>
                    </div>
                    <h3>Failed to Load Chart</h3>
                    <p id="error-message">Could not connect to the database</p>
                    <button id="retry-btn" class="btn-retry">
                        <i class='bx bx-revision'></i> Try Again
                    </button>
                </div>
                
                <!-- Chart Canvas -->
                <div id="chart-wrapper" class="chart-wrapper">
                    <canvas id="chart" height="400"></canvas>
                </div>
                
                <div class="chart-info">
                    <div class="info-card">
                        <i class='bx bx-info-circle'></i>
                        <p>This chart shows temperature readings for each tank. Select a tank and number of readings, then click "Load Chart". Temperatures above 50Â°C are highlighted in red.</p>
                    </div>
                </div>
            </div>

        </main>
    </section>

    <script src="script.js"></script>
</body>
</html>